(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{data:()=>c});var n={};e.r(n),e.d(n,{areAllRecordingsLoaded:()=>P,getActivePlugins:()=>B,getActiveRecordingId:()=>O,getActiveRecordings:()=>U,getAdminUrl:()=>D,getEntityRecord:()=>_,getExperiment:()=>k,getExperimentAttribute:()=>I,getHomeUrl:()=>M,getKindEntities:()=>x,getNextBatchKey:()=>C,getPageAttribute:()=>T,getPluginSetting:()=>Q,getQuota:()=>Y,getRecording:()=>G,getRecordingAttribute:()=>j,getRecordingStatus:()=>V,getRecordings:()=>N,getToday:()=>L,isLocked:()=>A});var r={};e.r(r),e.d(r,{disableRecordings:()=>ee,lock:()=>z,receiveActiveRecordings:()=>Z,receiveEntityRecords:()=>q,receiveExperiments:()=>X,receiveKindEntitiesQuery:()=>H,receivePluginSettings:()=>ie,receivePlugins:()=>re,receiveRecordingStatus:()=>te,receiveRecordings:()=>$,receiveSiteQuota:()=>oe,setNextBatchKey:()=>W,setPageAttribute:()=>F,setToday:()=>ne,unlock:()=>J});var i={};e.r(i),e.d(i,{removeRecordings:()=>ye,setRecordingStatus:()=>Ee});var o={};e.r(o),e.d(o,{getActivePlugins:()=>je,getActiveRecordings:()=>Ae,getEntityRecord:()=>Se,getExperiment:()=>ke,getKindEntities:()=>Re,getQuota:()=>Le,getRecording:()=>Pe,getRecordingStatus:()=>Ge,getRecordings:()=>Oe});var c={};e.r(c),e.d(c,{STORE_NAME:()=>l,useAdminUrl:()=>He,useHomeUrl:()=>qe,usePageAttribute:()=>Ye});const a=window.wp.data,u=window.neliosr.date,s=window.lodash;var l="neliosr/data",f={config:[],data:{}},d={},p={isLocked:!1,"recording/isSidebarOpen":!0},h={active:0,items:[]},v={recordingStatus:!1,today:"2013-01-01",plugins:[],nelio:{homeUrl:"",adminUrl:"/wp-admin/",siteId:"",capabilities:[]}},y=void 0,g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},b.apply(this,arguments)},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},E.apply(this,arguments)},w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)},m=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},R.apply(this,arguments)};const S=(0,a.combineReducers)({entities:function(e,t){var n;return void 0===e&&(e=f),null!==(n=function(e,t){var n;switch(t.type){case"RECEIVE_TYPE_QUERY":return g(g({},e),{config:t.kindEntities});case"RECEIVE_ITEMS":return g(g({},e),{data:g(g({},e.data),(n={},n[t.kind]=g(g({},e.data[t.kind]),(0,s.keyBy)(t.items,"id")),n))})}}(e,t))&&void 0!==n?n:e},experiments:function(e,t){var n;return void 0===e&&(e=d),null!==(n=function(e,t){if("RECEIVE_EXPERIMENTS"===t.type)return b(b({},e),(0,s.keyBy)(t.experiments,"id"))}(e,t))&&void 0!==n?n:e},page:function(e,t){var n;return void 0===e&&(e=p),null!==(n=function(e,t){var n;switch(t.type){case"SET_PAGE_ATTRIBUTE":return t.name?E(E({},e),((n={})[t.name]=t.value,n)):e;case"LOCK_UI":return E(E({},e),{isLocked:!0});case"UNLOCK_UI":return E(E({},e),{isLocked:!1})}}(e,t))&&void 0!==n?n:e},recordings:function(e,t){var n;return void 0===e&&(e=h),null!==(n=function(e,t){switch(t.type){case"SET_NEXT_BATCH_KEY":return w(w({},e),{nextBatchKey:t.key?{key:t.key}:"done"});case"DISABLE_RECORDINGS":return t.recordingIds.length?w(w({},e),{items:e.items.filter((function(e){return!t.recordingIds.includes(e.id)}))}):e;case"RECEIVE_ACTIVE_RECORDINGS":return w(w({},e),{active:t.activeRecordings});case"RECEIVE_RECORDINGS":return t.recordings.length?w(w({},e),{items:m(m([],e.items,!0),t.recordings,!0)}):e}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=v),null!==(n=function(e,t){switch(t.type){case"SET_TODAY":return R(R({},e),{today:t.today});case"RECEIVE_PLUGINS":return R(R({},e),{plugins:t.plugins||[]});case"RECEIVE_RECORDING_STATUS":return R(R({},e),{recordingStatus:t.recordingStatus});case"RECEIVE_PLUGIN_SETTINGS":return R(R({},e),{nelio:t.settings})}}(e,t))&&void 0!==n?n:e},siteQuota:function(e,t){var n;return void 0===e&&(e=y),null!==(n=function(e,t){if("RECEIVE_SITE_QUOTA"===t.type)return t.quota}(0,t))&&void 0!==n?n:e}});function x(e){return e.entities.config}function _(e,t,n){return(0,s.get)(e.entities.data,[t,n])}function k(e,t){return(0,s.get)(e.experiments,t)}function I(e,t,n){var r=k(e,t);if(r)return r[n]}function T(e,t){return e.page[t]}function A(e){return T(e,"isLocked")}function O(e){return T(e,"recording/activeId")}function P(e){return"done"===e.recordings.nextBatchKey}function C(e){return e.recordings.nextBatchKey&&"done"!==e.recordings.nextBatchKey?e.recordings.nextBatchKey.key:void 0}function U(e){return e.recordings.active}function N(e){return e.recordings.items}function G(e,t){return e.recordings.items.find((function(e){return e.id===t}))}function j(e,t,n){var r=G(e,t);if(r)return r[n]}const K=window.wp.url;function V(e){return e.settings.recordingStatus}function L(e){return e.settings.today}function B(e){return e.settings.plugins}function Q(e,t){return e.settings.nelio[t]}function D(e,t,n){var r=Q(e,"adminUrl");return(0,K.addQueryArgs)("".concat(r).concat(t),n)}function M(e,t,n){var r=Q(e,"homeUrl");return(0,K.addQueryArgs)("".concat(r).concat(t),n)}function Y(e){return e.siteQuota}function H(e){return{type:"RECEIVE_TYPE_QUERY",kindEntities:(0,s.castArray)(e)}}function q(e,t){return{type:"RECEIVE_ITEMS",items:(0,s.castArray)(t),kind:e}}function X(e){return{type:"RECEIVE_EXPERIMENTS",experiments:(0,s.castArray)(e)}}function F(e,t){return{type:"SET_PAGE_ATTRIBUTE",name:e,value:t}}function z(){return{type:"LOCK_UI"}}function J(){return{type:"UNLOCK_UI"}}function W(e){return{type:"SET_NEXT_BATCH_KEY",key:e}}function Z(e){return{type:"RECEIVE_ACTIVE_RECORDINGS",activeRecordings:e}}function $(e){return{type:"RECEIVE_RECORDINGS",recordings:(0,s.castArray)(e)}}function ee(e){return{type:"DISABLE_RECORDINGS",recordingIds:(0,s.castArray)(e)}}function te(e){return{type:"RECEIVE_RECORDING_STATUS",recordingStatus:e}}function ne(e){return{type:"SET_TODAY",today:e}}function re(e){return{type:"RECEIVE_PLUGINS",plugins:(0,s.castArray)(e)}}function ie(e){return{type:"RECEIVE_PLUGIN_SETTINGS",settings:e}}function oe(e){return{type:"RECEIVE_SITE_QUOTA",quota:e}}const ce=window.wp.apiFetch;var ae=e.n(ce);const ue=window.wp.date;var se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},se.apply(this,arguments)};const le=function(e){var t=e.url,n=e.path,r=(0,ue.format)("YmjHi").substring(0,11)+"0";return ae()(se(se(se({},e),t&&{url:fe(e)?(0,K.addQueryArgs)(t,{neliosrts:r}):t}),n&&{path:(0,K.addQueryArgs)(n,{neliosrts:r})}))};var fe=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const de=window.wp.i18n,pe=window.neliosr.utils;var he=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},ve=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function ye(e){return he(this,void 0,void 0,(function(){var t;return ve(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,a.dispatch)(l).lock(),[4,le({path:"/neliosr/v1/recordings",method:"DELETE",data:{ids:e}})];case 1:return n.sent(),(0,a.dispatch)(l).disableRecordings(e),(0,a.dispatch)(l).unlock(),[3,3];case 2:throw t=n.sent(),(0,a.dispatch)(l).unlock(),(0,pe.createErrorNotice)(t,(0,de._x)("Error while deleting recordings.","text","nelio-session-recordings")),t;case 3:return[2]}}))}))}var ge=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},be=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function Ee(e){return ge(this,void 0,void 0,(function(){var t;return be(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,a.dispatch)(l).lock(),[4,le({path:"/neliosr/v1/recording-status",method:"POST",data:{status:e}})];case 1:return n.sent(),(0,a.dispatch)(l).receiveRecordingStatus(e),(0,a.dispatch)(l).unlock(),[3,3];case 2:return t=n.sent(),(0,pe.createErrorNotice)(t,(0,de._x)("Recordings status can’t be changed","text","nelio-session-recordings")),(0,a.dispatch)(l).unlock(),[3,3];case 3:return[2]}}))}))}var we=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},me=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function Re(){return we(this,void 0,void 0,(function(){var e,t;return me(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/types"})];case 1:return e=n.sent(),(0,a.dispatch)(l).receiveKindEntitiesQuery((0,s.values)(e)),[3,3];case 2:return t=n.sent(),console.warn(t),[3,3];case 3:return[2]}}))}))}function Se(e,t){return we(this,void 0,void 0,(function(){var n,r,i;return me(this,(function(o){switch(o.label){case 0:if(!e||!t)return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,(0,a.resolveSelect)(l).getKindEntities()];case 2:return n=o.sent(),(0,s.find)(n,{name:e})?[4,le({path:"/neliosr/v1/post/?id=".concat(t,"&type=").concat(e)})]:(console.warn("Entity ".concat(e," not found in"),n),[2]);case 3:return r=o.sent(),(0,a.dispatch)(l).receiveEntityRecords(e,r),[3,5];case 4:return i=o.sent(),console.warn(i),[3,5];case 5:return[2]}}))}))}var xe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},_e=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function ke(e){return xe(this,void 0,void 0,(function(){var t,n,r;return _e(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/experiment/".concat(e)})];case 1:return t=i.sent(),(0,a.dispatch)(l).receiveExperiments(t),[3,3];case 2:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Unable to retrieve experiment ".concat(e,". Error: ").concat(r,".")),[3,3];case 3:return[2]}}))}))}var Ie=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},Te=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function Ae(){return Ie(this,void 0,void 0,(function(){var e,t;return Te(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/active-recordings"})];case 1:return e=n.sent(),(0,a.dispatch)(l).receiveActiveRecordings(e),[3,3];case 2:throw t=n.sent(),(0,pe.createErrorNotice)(t,(0,de._x)("Error while accessing amount of active recordings.","text","nelio-session-recordings")),t;case 3:return[2]}}))}))}function Oe(){return Ie(this,void 0,void 0,(function(){return Te(this,(function(e){switch(e.label){case 0:return(0,a.select)(l).areAllRecordingsLoaded()?[3,2]:[4,Ce()];case 1:return e.sent(),[3,0];case 2:return[2]}}))}))}function Pe(e){return Ie(this,void 0,void 0,(function(){var t,n;return Te(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/recording/".concat(e)})];case 1:return t=r.sent(),(0,a.dispatch)(l).receiveRecordings([t]),(0,a.dispatch)(l).setPageAttribute("recording/activeId",t.id),[3,3];case 2:throw n=r.sent(),(0,pe.createErrorNotice)(n,(0,de._x)("Error while accessing recording.","text","nelio-session-recordings")),n;case 3:return[2]}}))}))}function Ce(){return Ie(this,void 0,void 0,(function(){var e,t,n;return Te(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=(0,a.select)(l).getNextBatchKey(),[4,le({path:e?"/neliosr/v1/recordings?key=".concat(encodeURIComponent(e)):"/neliosr/v1/recordings"})];case 1:return t=r.sent(),(0,a.dispatch)(l).receiveRecordings(t.data),(0,a.dispatch)(l).setNextBatchKey(t.key),[3,3];case 2:throw n=r.sent(),(0,pe.createErrorNotice)(n,(0,de._x)("Error while accessing recordings.","text","nelio-session-recordings")),n;case 3:return[2]}}))}))}var Ue=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function Ge(){return Ue(this,void 0,void 0,(function(){var e,t,n;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,le({method:"GET",path:"/neliosr/v1/recording-status"})];case 1:return e=r.sent(),(0,a.dispatch)(l).receiveRecordingStatus(e),[3,3];case 2:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve recording status. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}function je(){return Ue(this,void 0,void 0,(function(){var e,t,n;return Ne(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/plugins"})];case 1:return e=r.sent(),(0,a.dispatch)(l).receivePlugins(e),[3,3];case 2:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve active plugins. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}var Ke=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((r=r.apply(e,t||[])).next())}))},Ve=function(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(c=0)),c;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){c.label=a[1];break}if(6===a[0]&&c.label<i[1]){c.label=i[1],i=a;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(a);break}i[2]&&c.ops.pop(),c.trys.pop();continue}a=t.call(e,c)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function Le(){return Ke(this,void 0,void 0,(function(){var e,t;return Ve(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,le({path:"/neliosr/v1/site/quota"})];case 1:return e=n.sent(),(0,a.dispatch)(l).receiveSiteQuota(e),[3,3];case 2:throw t=n.sent(),(0,pe.createErrorNotice)(t,(0,de._x)("Unable to retrieve quota.","text","nelio-session-recordings")),t;case 3:return[2]}}))}))}var Be,Qe,De=function(){return De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},De.apply(this,arguments)},Me=De(De({},r),i);function Ye(e,t){var n,r=null!==(n=(0,a.useSelect)((function(t){return t(l).getPageAttribute(e)})))&&void 0!==n?n:t,i=(0,a.useDispatch)(l).setPageAttribute;return[r,function(t){return i(e,t)}]}(0,a.registerStore)(l,{reducer:S,controls:a.controls,actions:Me,selectors:n,resolvers:o}),(0,a.dispatch)(l).setToday((0,u.format)("Y-m-d",new Date)),null===(Qe=null===(Be=window.nab)||void 0===Be?void 0:Be.experimentLibrary)||void 0===Qe||Qe.registerCoreExperiments();var He=function(e,t){return(0,a.useSelect)((function(n){return n(l).getAdminUrl(e,t)}))},qe=function(e,t){return(0,a.useSelect)((function(n){return n(l).getHomeUrl(e,t)}))}})();var n=neliosr="undefined"==typeof neliosr?{}:neliosr;for(var r in t)n[r]=t[r];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();