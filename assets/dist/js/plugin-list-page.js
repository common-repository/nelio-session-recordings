(()=>{var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};(()=>{"use strict";e.r(n),e.d(n,{initPage:()=>h});const t=window.wp.element;window.wp.domReady;const i=window.wp.components,o=window.wp.apiFetch;var a=e.n(o);const r=window.wp.date,s=window.wp.url;var l=function(){return l=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},l.apply(this,arguments)};var c=function(e){var n,t;return!!(null===(n=e.url)||void 0===n?void 0:n.includes("/wp-json/"))||!!(null===(t=e.url)||void 0===t?void 0:t.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const d=window.wp.i18n,u=window.neliosr.components;var v=function(){return v=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},v.apply(this,arguments)},p=function(e){var n=e.isSubscribed,o=e.isStandalone,a=g(e),r=a.isModalOpen,s=a.openModal,l=a.closeModal,c=a.mainActionLabel,p=a.isDeactivating,m=a.deactivate,f=a.cleanAndDeactivate,b=a.reason,h=a.setReason;return t.createElement("div",{className:"neliosr-deactivation"},t.createElement(i.Button,{className:"neliosr-deactivation__button",variant:"link",onClick:s},(0,d._x)("Deactivate","command","nelio-session-recordings")),r&&t.createElement(i.Modal,{title:(0,d._x)("Nelio Session Recordings Deactivation","text","nelio-session-recordings"),isDismissible:!p,shouldCloseOnEsc:!p,shouldCloseOnClickOutside:!p,onRequestClose:l},"temporary-deactivation"===b.value?t.createElement(t.Fragment,null,t.createElement(u.RadioControl,{selected:b.value,options:w,onChange:function(e){return h({value:e,details:""})},disabled:p}),t.createElement("br",null)):t.createElement(t.Fragment,null,t.createElement("p",null,(0,d._x)("If you have a moment, please share why you are deactivating Nelio Session Recordings:","user","nelio-session-recordings")),t.createElement(u.RadioControl,{className:"neliosr-deactivation__options",selected:b.value,options:y,onChange:function(e){return h({value:e,details:""})},extraValue:b.details,onExtraChange:function(e){return h(v(v({},b),{details:e}))},disabled:p})),n&&"temporary-deactivation"!==b.value&&t.createElement("p",{className:"neliosr-deactivation__subscription-warning"},t.createElement(i.Dashicon,{icon:"warning"}),t.createElement("span",null,o?(0,d._x)("Please keep in mind your subscription to Nelio Session Recordings will remain active after removing the plugin from this site.","user","nelio-session-recordings"):(0,d._x)("Please keep in mind your subscription to Nelio A/B Testing will remain active after removing the plugin from this site. If you want to unsubscribe from our service, you can do so from the plugin’s Account page before you deactivate the plugin.","user","nelio-session-recordings"))),t.createElement("div",{className:"neliosr-deactivation__actions"},"temporary-deactivation"===b.value||p?t.createElement("span",null):t.createElement(i.Button,{variant:"link",disabled:p,onClick:function(){return f()}},(0,d._x)("Just Delete Data","command","nelio-session-recordings")),t.createElement(i.Button,{variant:"primary",disabled:p||"clean-stuff"===b.value,onClick:function(){return"temporary-deactivation"===b.value?m():f(b.details?"".concat(b.value,": ").concat(b.details):b.value)}},c))))},g=function(e){var n=e.cleanNonce,i=e.deactivationUrl,o=(0,t.useState)(b),d=o[0],u=o[1],p=function(){window.location.href=i},g=function(){return u(v(v({},b),{isModalOpen:!1}))},w="temporary-deactivation"===d.reason.value?m(d.isDeactivating):f(d.isDeactivating);return{isModalOpen:d.isModalOpen,openModal:function(){return u(v(v({},b),{isModalOpen:!0}))},closeModal:g,isDeactivating:d.isDeactivating,mainActionLabel:w,deactivate:function(){u(v(v({},d),{reason:b.reason,isDeactivating:!0})),p()},cleanAndDeactivate:function(e){var t,i,o,m;u(v(v({},d),{isDeactivating:!0})),(t={path:"/neliosr/v1/plugin/clean",method:"POST",data:{reason:e,neliosrnonce:n}},i=t.url,o=t.path,m=(0,r.format)("YmjHi").substring(0,11)+"0",a()(l(l(l({},t),i&&{url:c(t)?(0,s.addQueryArgs)(i,{neliosrts:m}):i}),o&&{path:(0,s.addQueryArgs)(o,{neliosrts:m})}))).then(p,g)},reason:d.reason,setReason:function(e){return u(v(v({},d),{reason:e}))}}},m=function(e){return e?(0,d._x)("Deactivating…","text","nelio-session-recordings"):(0,d._x)("Deactivate","command","nelio-session-recordings")},f=function(e){return e?(0,d._x)("Deleting Data…","text","nelio-session-recordings"):(0,d._x)("Submit and Delete Data","command","nelio-session-recordings")},b={isModalOpen:!1,isDeactivating:!1,reason:{value:"temporary-deactivation",details:""}},w=[{value:"temporary-deactivation",label:(0,d._x)("It’s a temporary deactivation","text","nelio-session-recordings")},{value:"clean-stuff",label:(0,d._x)("Delete Nelio Session Recordings’ data and deactivate plugin","text","nelio-session-recordings")}],y=[{value:"plugin-no-longer-needed",label:(0,d._x)("I no longer need the plugin","text","nelio-session-recordings")},{value:"plugin-doesnt-work",label:(0,d._x)("I couldn’t get the plugin to work","text","nelio-session-recordings"),extra:(0,d._x)("What went wrong?","text","nelio-session-recordings")},{value:"better-plugin-found",label:(0,d._x)("I found a better plugin","text","nelio-session-recordings"),extra:(0,d._x)("What’s the plugin’s name?","text","nelio-session-recordings")},{value:"other",label:(0,d._x)("Other","text","nelio-session-recordings"),extra:(0,d._x)("Please share the reason…","user","nelio-session-recordings")}];function h(e){var n,o,a=e.isSubscribed,r=e.isStandalone,s=e.cleanNonce,l=e.deactivationUrl,c=document.querySelector(".neliosr-deactivate-link");c&&(n=t.createElement(i.SlotFillProvider,null,t.createElement(p,{isSubscribed:a,isStandalone:r,deactivationUrl:l,cleanNonce:s}),t.createElement(i.Popover.Slot,null)),(o=c)&&(t.createRoot?(0,t.createRoot)(o).render(n):(0,t.render)(n,o)))}})();var t=neliosr="undefined"==typeof neliosr?{}:neliosr;for(var i in n)t[i]=n[i];n.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})();